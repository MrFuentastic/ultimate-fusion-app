!function(n){function t(c){if(e[c])return e[c].exports;var i=e[c]={i:c,l:!1,exports:{}};return n[c].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e={};t.m=n,t.c=e,t.d=function(n,e,c){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:c})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="/dist/",t(t.s=228)}({113:/*!************************************************!*\
  !*** ./app/javascript/src/client/converter.js ***!
  \************************************************/
/*! dynamic exports provided */
/*! all exports used */
function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError("Cannot call a class as a function");\n  }\n}\n\n/* global localStorage document screen window */\nvar SIZE_REFERENCE = 60;\n\nvar Converter = function () {\n  function Converter(screenSize) {\n    _classCallCheck(this, Converter);\n\n    this.screenSize = screenSize;\n    this.scalingFactor = getScalingFactor(screenSize);\n  }\n\n  _createClass(Converter, [{\n    key: "toDevicePixel",\n    value: function toDevicePixel(value) {\n      return value / this.scalingFactor;\n    }\n  }, {\n    key: "toAbsPixel",\n    value: function toAbsPixel(value) {\n      return value * this.scalingFactor;\n    }\n  }, {\n    key: "convertClickPos",\n    value: function convertClickPos(transform, evt) {\n      return {\n        position: {\n          x: this.toAbsPixel(evt.clientX) + transform.x,\n          y: this.toAbsPixel(evt.clientY) + transform.y\n        },\n        originalEvent: evt\n      };\n    }\n  }, {\n    key: "convertTouchPos",\n    value: function convertTouchPos(transform, evt) {\n      var event = {\n        position: [],\n        originalEvent: evt\n      };\n\n      for (var i = 0; i < evt.changedTouches.length; i++) {\n        var currTouched = evt.changedTouches[i];\n\n        event.position.push({\n          x: this.toAbsPixel(currTouched.clientX) + transform.x,\n          y: this.toAbsPixel(currTouched.clientY) + transform.y\n        });\n      }\n\n      return event;\n    }\n  }]);\n\n  return Converter;\n}();\n\nfunction getScalingFactor(screenSize) {\n  var diagonalPixel = Math.sqrt(Math.pow(screen.height, 2) + Math.pow(screen.width, 2));\n  var diagonalScreenCM = screenSize * 2.54;\n  var pixelPerCentimeter = diagonalPixel / diagonalScreenCM;\n\n  return SIZE_REFERENCE / pixelPerCentimeter;\n}\n\nexports.default = Converter;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vYXBwL2phdmFzY3JpcHQvc3JjL2NsaWVudC9jb252ZXJ0ZXIuanM/YzYyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICAgIH1cbiAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5cbi8qIGdsb2JhbCBsb2NhbFN0b3JhZ2UgZG9jdW1lbnQgc2NyZWVuIHdpbmRvdyAqL1xudmFyIFNJWkVfUkVGRVJFTkNFID0gNjA7XG5cbnZhciBDb252ZXJ0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIENvbnZlcnRlcihzY3JlZW5TaXplKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbnZlcnRlcik7XG5cbiAgICB0aGlzLnNjcmVlblNpemUgPSBzY3JlZW5TaXplO1xuICAgIHRoaXMuc2NhbGluZ0ZhY3RvciA9IGdldFNjYWxpbmdGYWN0b3Ioc2NyZWVuU2l6ZSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQ29udmVydGVyLCBbe1xuICAgIGtleTogXCJ0b0RldmljZVBpeGVsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRvRGV2aWNlUGl4ZWwodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSAvIHRoaXMuc2NhbGluZ0ZhY3RvcjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidG9BYnNQaXhlbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0b0Fic1BpeGVsKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgKiB0aGlzLnNjYWxpbmdGYWN0b3I7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbnZlcnRDbGlja1Bvc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb252ZXJ0Q2xpY2tQb3ModHJhbnNmb3JtLCBldnQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgeDogdGhpcy50b0Fic1BpeGVsKGV2dC5jbGllbnRYKSArIHRyYW5zZm9ybS54LFxuICAgICAgICAgIHk6IHRoaXMudG9BYnNQaXhlbChldnQuY2xpZW50WSkgKyB0cmFuc2Zvcm0ueVxuICAgICAgICB9LFxuICAgICAgICBvcmlnaW5hbEV2ZW50OiBldnRcbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbnZlcnRUb3VjaFBvc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb252ZXJ0VG91Y2hQb3ModHJhbnNmb3JtLCBldnQpIHtcbiAgICAgIHZhciBldmVudCA9IHtcbiAgICAgICAgcG9zaXRpb246IFtdLFxuICAgICAgICBvcmlnaW5hbEV2ZW50OiBldnRcbiAgICAgIH07XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZ0LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjdXJyVG91Y2hlZCA9IGV2dC5jaGFuZ2VkVG91Y2hlc1tpXTtcblxuICAgICAgICBldmVudC5wb3NpdGlvbi5wdXNoKHtcbiAgICAgICAgICB4OiB0aGlzLnRvQWJzUGl4ZWwoY3VyclRvdWNoZWQuY2xpZW50WCkgKyB0cmFuc2Zvcm0ueCxcbiAgICAgICAgICB5OiB0aGlzLnRvQWJzUGl4ZWwoY3VyclRvdWNoZWQuY2xpZW50WSkgKyB0cmFuc2Zvcm0ueVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGV2ZW50O1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBDb252ZXJ0ZXI7XG59KCk7XG5cbmZ1bmN0aW9uIGdldFNjYWxpbmdGYWN0b3Ioc2NyZWVuU2l6ZSkge1xuICB2YXIgZGlhZ29uYWxQaXhlbCA9IE1hdGguc3FydChNYXRoLnBvdyhzY3JlZW4uaGVpZ2h0LCAyKSArIE1hdGgucG93KHNjcmVlbi53aWR0aCwgMikpO1xuICB2YXIgZGlhZ29uYWxTY3JlZW5DTSA9IHNjcmVlblNpemUgKiAyLjU0O1xuICB2YXIgcGl4ZWxQZXJDZW50aW1ldGVyID0gZGlhZ29uYWxQaXhlbCAvIGRpYWdvbmFsU2NyZWVuQ007XG5cbiAgcmV0dXJuIFNJWkVfUkVGRVJFTkNFIC8gcGl4ZWxQZXJDZW50aW1ldGVyO1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSBDb252ZXJ0ZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9hcHAvamF2YXNjcmlwdC9zcmMvY2xpZW50L2NvbnZlcnRlci5qc1xuLy8gbW9kdWxlIGlkID0gMTEzXG4vLyBtb2R1bGUgY2h1bmtzID0gNiA3IDE1Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///113\n')},114:/*!*********************************************!*\
  !*** ./app/javascript/src/client/style.css ***!
  \*********************************************/
/*! dynamic exports provided */
/*! all exports used */
function(module,exports){eval('throw new Error("Module build failed: ModuleBuildError: Module build failed: \\n.SwipRoot {\\n^\\n      Invalid CSS after \\"e\\": expected 1 selector or at-rule, was \\"exports = module.ex\\"\\n      in /Users/vfuentes/Desktop/Actualize/ultimate-fusion-app/app/javascript/src/client/style.css (line 1, column 1)\\n    at runLoaders (/Users/vfuentes/Desktop/Actualize/ultimate-fusion-app/node_modules/webpack/lib/NormalModule.js:195:19)\\n    at /Users/vfuentes/Desktop/Actualize/ultimate-fusion-app/node_modules/loader-runner/lib/LoaderRunner.js:364:11\\n    at /Users/vfuentes/Desktop/Actualize/ultimate-fusion-app/node_modules/loader-runner/lib/LoaderRunner.js:230:18\\n    at context.callback (/Users/vfuentes/Desktop/Actualize/ultimate-fusion-app/node_modules/loader-runner/lib/LoaderRunner.js:111:13)\\n    at Object.asyncSassJobQueue.push [as callback] (/Users/vfuentes/Desktop/Actualize/ultimate-fusion-app/node_modules/sass-loader/lib/loader.js:55:13)\\n    at Object.<anonymous> (/Users/vfuentes/Desktop/Actualize/ultimate-fusion-app/node_modules/async/dist/async.js:2244:31)\\n    at Object.callback (/Users/vfuentes/Desktop/Actualize/ultimate-fusion-app/node_modules/async/dist/async.js:906:16)\\n    at options.error (/Users/vfuentes/Desktop/Actualize/ultimate-fusion-app/node_modules/node-sass/lib/index.js:294:32)");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE0LmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///114\n')},228:/*!*******************************************!*\
  !*** ./app/javascript/src/client/init.js ***!
  \*******************************************/
/*! dynamic exports provided */
/*! all exports used */
function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n  };\n}(); /* global document window screen */\n\nvar _device = __webpack_require__(/*! ./device */ 57);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _sensor = __webpack_require__(/*! ./sensor */ 58);\n\nvar _sensor2 = _interopRequireDefault(_sensor);\n\nvar _converter = __webpack_require__(/*! ./converter */ 113);\n\nvar _converter2 = _interopRequireDefault(_converter);\n\n__webpack_require__(/*! ./style.css */ 114);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction init(_ref, initApp) {\n  var socket = _ref.socket,\n      container = _ref.container,\n      type = _ref.type;\n\n  return new ClientView({ socket: socket, container: container, type: type, initApp: initApp });\n}\n\nvar ClientView = function () {\n  function ClientView(_ref2) {\n    var _this = this;\n\n    var container = _ref2.container,\n        type = _ref2.type,\n        socket = _ref2.socket,\n        initApp = _ref2.initApp;\n\n    _classCallCheck(this, ClientView);\n\n    this.socket = socket;\n\n    this.initApp = initApp;\n\n    // init container\n    this.container = container;\n    this.container.classList.add('SwipRoot');\n    this.container.innerHTML = '';\n\n    // init stage\n    this.stage = getStage(type);\n    this.stage.resize(container.clientWidth, container.clientHeight);\n    this.container.appendChild(this.stage.element);\n    window.addEventListener('resize', function () {\n      _this.stage.resize(container.clientWidth, container.clientHeight);\n    });\n\n    // init swip points\n    this.swipPoints = new SwipPoints();\n    this.container.appendChild(this.swipPoints.element);\n\n    this.size = _device2.default.requestSize();\n\n    // add connect button if size is not set\n    if (Number.isNaN(this.size)) {\n      this.connectButton = document.createElement('button');\n      this.connectButton.innerText = 'connect';\n      this.connectButton.classList.add('SwipButton');\n      this.connectButton.onclick = function () {\n        return _this.connect();\n      };\n      this.container.appendChild(this.connectButton);\n    } else {\n      this.initClient();\n    }\n  }\n\n  _createClass(ClientView, [{\n    key: 'initClient',\n    value: function initClient() {\n      var _this2 = this;\n\n      this.client = new Client({\n        size: this.size,\n        socket: this.socket,\n        stage: this.stage.element,\n        swipPoints: this.swipPoints,\n        container: this.container\n      });\n\n      window.addEventListener('resize', function () {\n        return _this2.client.reconnect();\n      });\n\n      this.initApp(this.client);\n    }\n  }, {\n    key: 'connect',\n    value: function connect() {\n      this.size = _device2.default.requestSize();\n\n      if (!Number.isNaN(this.size)) {\n        this.connectButton.style.display = 'none';\n\n        this.initClient();\n      }\n    }\n  }]);\n\n  return ClientView;\n}();\n\nvar Client = function () {\n  function Client(_ref3) {\n    var size = _ref3.size,\n        stage = _ref3.stage,\n        container = _ref3.container,\n        socket = _ref3.socket,\n        swipPoints = _ref3.swipPoints;\n\n    _classCallCheck(this, Client);\n\n    this.converter = new _converter2.default(size);\n    this.stage = stage;\n    this.container = container;\n    this.swipPoints = swipPoints;\n    this.socket = socket;\n    this.state = {\n      client: {\n        transform: { x: 0, y: 0 }\n      }\n    };\n\n    this.connect();\n    this.initEventListener();\n  }\n\n  _createClass(Client, [{\n    key: 'connect',\n    value: function connect() {\n      this.socket.emit('CONNECT', {\n        size: {\n          width: this.converter.toAbsPixel(this.stage.clientWidth),\n          height: this.converter.toAbsPixel(this.stage.clientHeight)\n        }\n      });\n    }\n  }, {\n    key: 'reconnect',\n    value: function reconnect() {\n      this.socket.emit('RECONNECT', {\n        size: {\n          width: this.converter.toAbsPixel(this.stage.clientWidth),\n          height: this.converter.toAbsPixel(this.stage.clientHeight)\n        }\n      });\n    }\n  }, {\n    key: 'initEventListener',\n    value: function initEventListener() {\n      var _this3 = this;\n\n      _sensor2.default.onSwipe(this.container, function (evt) {\n        var position = {\n          x: _this3.converter.toAbsPixel(evt.position.x),\n          y: _this3.converter.toAbsPixel(evt.position.y)\n        };\n\n        _this3.swipPoints.animatePoint(evt.position.x, evt.position.y);\n\n        _this3.socket.emit('SWIPE', {\n          direction: evt.direction,\n          position: position\n        });\n      });\n    }\n  }, {\n    key: 'onClick',\n    value: function onClick(callback) {\n      var _this4 = this;\n\n      this.stage.addEventListener('click', function (evt) {\n        callback(_this4.converter.convertClickPos(_this4.state.client.transform, evt));\n      });\n    }\n  }, {\n    key: 'onDragStart',\n    value: function onDragStart(callback) {\n      var _this5 = this;\n\n      this.stage.addEventListener('touchstart', function (evt) {\n        callback(_this5.converter.convertTouchPos(_this5.state.client.transform, evt));\n      });\n    }\n  }, {\n    key: 'onDragMove',\n    value: function onDragMove(callback) {\n      var _this6 = this;\n\n      this.stage.addEventListener('touchmove', function (evt) {\n        evt.preventDefault();\n        callback(_this6.converter.convertTouchPos(_this6.state.client.transform, evt));\n      });\n    }\n  }, {\n    key: 'onDragEnd',\n    value: function onDragEnd(callback) {\n      var _this7 = this;\n\n      this.stage.addEventListener('touchend', function (evt) {\n        callback(_this7.converter.convertTouchPos(_this7.state.client.transform, evt));\n      });\n    }\n  }, {\n    key: 'onUpdate',\n    value: function onUpdate(callback) {\n      var _this8 = this;\n\n      this.socket.on('CHANGED', function (state) {\n        _this8.state = state;\n        callback(state);\n      });\n    }\n  }, {\n    key: 'emit',\n    value: function emit(type, data) {\n      this.socket.emit('CLIENT_ACTION', { type: type, data: data });\n    }\n  }]);\n\n  return Client;\n}();\n\nvar SwipPoints = function () {\n  function SwipPoints() {\n    _classCallCheck(this, SwipPoints);\n\n    this.initPoints();\n  }\n\n  _createClass(SwipPoints, [{\n    key: 'initPoints',\n    value: function initPoints() {\n      var i = void 0;\n      this.nextPoint = 0;\n      this.points = [];\n\n      this.element = document.createElement('div');\n\n      for (i = 0; i < 5; i++) {\n        var point = this.points[i] = document.createElement('div');\n        point.classList.add('SwipPoint');\n        this.element.appendChild(point);\n      }\n    }\n  }, {\n    key: 'animatePoint',\n    value: function animatePoint(x, y) {\n      var point = this.points[this.nextPoint];\n\n      point.style.top = y + 'px';\n      point.style.left = x + 'px';\n      point.classList.remove('SwipPoint--start-animation');\n\n      // force reflow\n      void point.offsetWidth;\n\n      point.classList.add('SwipPoint--start-animation');\n\n      this.nextPoint = (this.nextPoint + 1) % this.points.length;\n    }\n  }]);\n\n  return SwipPoints;\n}();\n\nfunction getStage(type) {\n  if (type === 'dom') {\n    return new DOMStage();\n  }\n\n  return new CanvasStage();\n}\n\nvar CanvasStage = function () {\n  function CanvasStage() {\n    _classCallCheck(this, CanvasStage);\n\n    this.element = document.createElement('canvas');\n    this.element.style.cursor = 'pointer';\n  }\n\n  _createClass(CanvasStage, [{\n    key: 'resize',\n    value: function resize(width, height) {\n      this.element.width = width;\n      this.element.height = height;\n    }\n  }]);\n\n  return CanvasStage;\n}();\n\nvar DOMStage = function () {\n  function DOMStage() {\n    _classCallCheck(this, DOMStage);\n\n    this.element = document.createElement('div');\n  }\n\n  _createClass(DOMStage, [{\n    key: 'resize',\n    value: function resize(width, height) {\n      this.element.style.width = width + 'px';\n      this.element.style.height = height + 'px';\n    }\n  }]);\n\n  return DOMStage;\n}();\n\nexports.default = init;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vYXBwL2phdmFzY3JpcHQvc3JjL2NsaWVudC9pbml0LmpzP2IzNmQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgfVxuICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3RvcjtcbiAgfTtcbn0oKTsgLyogZ2xvYmFsIGRvY3VtZW50IHdpbmRvdyBzY3JlZW4gKi9cblxudmFyIF9kZXZpY2UgPSByZXF1aXJlKCcuL2RldmljZScpO1xuXG52YXIgX2RldmljZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZXZpY2UpO1xuXG52YXIgX3NlbnNvciA9IHJlcXVpcmUoJy4vc2Vuc29yJyk7XG5cbnZhciBfc2Vuc29yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlbnNvcik7XG5cbnZhciBfY29udmVydGVyID0gcmVxdWlyZSgnLi9jb252ZXJ0ZXInKTtcblxudmFyIF9jb252ZXJ0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29udmVydGVyKTtcblxucmVxdWlyZSgnLi9zdHlsZS5jc3MnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG59XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluaXQoX3JlZiwgaW5pdEFwcCkge1xuICB2YXIgc29ja2V0ID0gX3JlZi5zb2NrZXQsXG4gICAgICBjb250YWluZXIgPSBfcmVmLmNvbnRhaW5lcixcbiAgICAgIHR5cGUgPSBfcmVmLnR5cGU7XG5cbiAgcmV0dXJuIG5ldyBDbGllbnRWaWV3KHsgc29ja2V0OiBzb2NrZXQsIGNvbnRhaW5lcjogY29udGFpbmVyLCB0eXBlOiB0eXBlLCBpbml0QXBwOiBpbml0QXBwIH0pO1xufVxuXG52YXIgQ2xpZW50VmlldyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQ2xpZW50VmlldyhfcmVmMikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgY29udGFpbmVyID0gX3JlZjIuY29udGFpbmVyLFxuICAgICAgICB0eXBlID0gX3JlZjIudHlwZSxcbiAgICAgICAgc29ja2V0ID0gX3JlZjIuc29ja2V0LFxuICAgICAgICBpbml0QXBwID0gX3JlZjIuaW5pdEFwcDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDbGllbnRWaWV3KTtcblxuICAgIHRoaXMuc29ja2V0ID0gc29ja2V0O1xuXG4gICAgdGhpcy5pbml0QXBwID0gaW5pdEFwcDtcblxuICAgIC8vIGluaXQgY29udGFpbmVyXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgnU3dpcFJvb3QnKTtcbiAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcblxuICAgIC8vIGluaXQgc3RhZ2VcbiAgICB0aGlzLnN0YWdlID0gZ2V0U3RhZ2UodHlwZSk7XG4gICAgdGhpcy5zdGFnZS5yZXNpemUoY29udGFpbmVyLmNsaWVudFdpZHRoLCBjb250YWluZXIuY2xpZW50SGVpZ2h0KTtcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnN0YWdlLmVsZW1lbnQpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zdGFnZS5yZXNpemUoY29udGFpbmVyLmNsaWVudFdpZHRoLCBjb250YWluZXIuY2xpZW50SGVpZ2h0KTtcbiAgICB9KTtcblxuICAgIC8vIGluaXQgc3dpcCBwb2ludHNcbiAgICB0aGlzLnN3aXBQb2ludHMgPSBuZXcgU3dpcFBvaW50cygpO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuc3dpcFBvaW50cy5lbGVtZW50KTtcblxuICAgIHRoaXMuc2l6ZSA9IF9kZXZpY2UyLmRlZmF1bHQucmVxdWVzdFNpemUoKTtcblxuICAgIC8vIGFkZCBjb25uZWN0IGJ1dHRvbiBpZiBzaXplIGlzIG5vdCBzZXRcbiAgICBpZiAoTnVtYmVyLmlzTmFOKHRoaXMuc2l6ZSkpIHtcbiAgICAgIHRoaXMuY29ubmVjdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgdGhpcy5jb25uZWN0QnV0dG9uLmlubmVyVGV4dCA9ICdjb25uZWN0JztcbiAgICAgIHRoaXMuY29ubmVjdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdTd2lwQnV0dG9uJyk7XG4gICAgICB0aGlzLmNvbm5lY3RCdXR0b24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmNvbm5lY3QoKTtcbiAgICAgIH07XG4gICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNvbm5lY3RCdXR0b24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmluaXRDbGllbnQoKTtcbiAgICB9XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQ2xpZW50VmlldywgW3tcbiAgICBrZXk6ICdpbml0Q2xpZW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdENsaWVudCgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB0aGlzLmNsaWVudCA9IG5ldyBDbGllbnQoe1xuICAgICAgICBzaXplOiB0aGlzLnNpemUsXG4gICAgICAgIHNvY2tldDogdGhpcy5zb2NrZXQsXG4gICAgICAgIHN0YWdlOiB0aGlzLnN0YWdlLmVsZW1lbnQsXG4gICAgICAgIHN3aXBQb2ludHM6IHRoaXMuc3dpcFBvaW50cyxcbiAgICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRhaW5lclxuICAgICAgfSk7XG5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIuY2xpZW50LnJlY29ubmVjdCgpO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuaW5pdEFwcCh0aGlzLmNsaWVudCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29ubmVjdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbm5lY3QoKSB7XG4gICAgICB0aGlzLnNpemUgPSBfZGV2aWNlMi5kZWZhdWx0LnJlcXVlc3RTaXplKCk7XG5cbiAgICAgIGlmICghTnVtYmVyLmlzTmFOKHRoaXMuc2l6ZSkpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgdGhpcy5pbml0Q2xpZW50KCk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIENsaWVudFZpZXc7XG59KCk7XG5cbnZhciBDbGllbnQgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIENsaWVudChfcmVmMykge1xuICAgIHZhciBzaXplID0gX3JlZjMuc2l6ZSxcbiAgICAgICAgc3RhZ2UgPSBfcmVmMy5zdGFnZSxcbiAgICAgICAgY29udGFpbmVyID0gX3JlZjMuY29udGFpbmVyLFxuICAgICAgICBzb2NrZXQgPSBfcmVmMy5zb2NrZXQsXG4gICAgICAgIHN3aXBQb2ludHMgPSBfcmVmMy5zd2lwUG9pbnRzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENsaWVudCk7XG5cbiAgICB0aGlzLmNvbnZlcnRlciA9IG5ldyBfY29udmVydGVyMi5kZWZhdWx0KHNpemUpO1xuICAgIHRoaXMuc3RhZ2UgPSBzdGFnZTtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICB0aGlzLnN3aXBQb2ludHMgPSBzd2lwUG9pbnRzO1xuICAgIHRoaXMuc29ja2V0ID0gc29ja2V0O1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBjbGllbnQ6IHtcbiAgICAgICAgdHJhbnNmb3JtOiB7IHg6IDAsIHk6IDAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmNvbm5lY3QoKTtcbiAgICB0aGlzLmluaXRFdmVudExpc3RlbmVyKCk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQ2xpZW50LCBbe1xuICAgIGtleTogJ2Nvbm5lY3QnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0KCkge1xuICAgICAgdGhpcy5zb2NrZXQuZW1pdCgnQ09OTkVDVCcsIHtcbiAgICAgICAgc2l6ZToge1xuICAgICAgICAgIHdpZHRoOiB0aGlzLmNvbnZlcnRlci50b0Fic1BpeGVsKHRoaXMuc3RhZ2UuY2xpZW50V2lkdGgpLFxuICAgICAgICAgIGhlaWdodDogdGhpcy5jb252ZXJ0ZXIudG9BYnNQaXhlbCh0aGlzLnN0YWdlLmNsaWVudEhlaWdodClcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVjb25uZWN0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVjb25uZWN0KCkge1xuICAgICAgdGhpcy5zb2NrZXQuZW1pdCgnUkVDT05ORUNUJywge1xuICAgICAgICBzaXplOiB7XG4gICAgICAgICAgd2lkdGg6IHRoaXMuY29udmVydGVyLnRvQWJzUGl4ZWwodGhpcy5zdGFnZS5jbGllbnRXaWR0aCksXG4gICAgICAgICAgaGVpZ2h0OiB0aGlzLmNvbnZlcnRlci50b0Fic1BpeGVsKHRoaXMuc3RhZ2UuY2xpZW50SGVpZ2h0KVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdpbml0RXZlbnRMaXN0ZW5lcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRFdmVudExpc3RlbmVyKCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIF9zZW5zb3IyLmRlZmF1bHQub25Td2lwZSh0aGlzLmNvbnRhaW5lciwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICB2YXIgcG9zaXRpb24gPSB7XG4gICAgICAgICAgeDogX3RoaXMzLmNvbnZlcnRlci50b0Fic1BpeGVsKGV2dC5wb3NpdGlvbi54KSxcbiAgICAgICAgICB5OiBfdGhpczMuY29udmVydGVyLnRvQWJzUGl4ZWwoZXZ0LnBvc2l0aW9uLnkpXG4gICAgICAgIH07XG5cbiAgICAgICAgX3RoaXMzLnN3aXBQb2ludHMuYW5pbWF0ZVBvaW50KGV2dC5wb3NpdGlvbi54LCBldnQucG9zaXRpb24ueSk7XG5cbiAgICAgICAgX3RoaXMzLnNvY2tldC5lbWl0KCdTV0lQRScsIHtcbiAgICAgICAgICBkaXJlY3Rpb246IGV2dC5kaXJlY3Rpb24sXG4gICAgICAgICAgcG9zaXRpb246IHBvc2l0aW9uXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25DbGljaycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2xpY2soY2FsbGJhY2spIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICB0aGlzLnN0YWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBjYWxsYmFjayhfdGhpczQuY29udmVydGVyLmNvbnZlcnRDbGlja1BvcyhfdGhpczQuc3RhdGUuY2xpZW50LnRyYW5zZm9ybSwgZXZ0KSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbkRyYWdTdGFydCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uRHJhZ1N0YXJ0KGNhbGxiYWNrKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgdGhpcy5zdGFnZS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBjYWxsYmFjayhfdGhpczUuY29udmVydGVyLmNvbnZlcnRUb3VjaFBvcyhfdGhpczUuc3RhdGUuY2xpZW50LnRyYW5zZm9ybSwgZXZ0KSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbkRyYWdNb3ZlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25EcmFnTW92ZShjYWxsYmFjaykge1xuICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgIHRoaXMuc3RhZ2UuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY2FsbGJhY2soX3RoaXM2LmNvbnZlcnRlci5jb252ZXJ0VG91Y2hQb3MoX3RoaXM2LnN0YXRlLmNsaWVudC50cmFuc2Zvcm0sIGV2dCkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25EcmFnRW5kJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25EcmFnRW5kKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgICAgdGhpcy5zdGFnZS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgY2FsbGJhY2soX3RoaXM3LmNvbnZlcnRlci5jb252ZXJ0VG91Y2hQb3MoX3RoaXM3LnN0YXRlLmNsaWVudC50cmFuc2Zvcm0sIGV2dCkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25VcGRhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblVwZGF0ZShjYWxsYmFjaykge1xuICAgICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICAgIHRoaXMuc29ja2V0Lm9uKCdDSEFOR0VEJywgZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIF90aGlzOC5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICBjYWxsYmFjayhzdGF0ZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdlbWl0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW1pdCh0eXBlLCBkYXRhKSB7XG4gICAgICB0aGlzLnNvY2tldC5lbWl0KCdDTElFTlRfQUNUSU9OJywgeyB0eXBlOiB0eXBlLCBkYXRhOiBkYXRhIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBDbGllbnQ7XG59KCk7XG5cbnZhciBTd2lwUG9pbnRzID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTd2lwUG9pbnRzKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTd2lwUG9pbnRzKTtcblxuICAgIHRoaXMuaW5pdFBvaW50cygpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFN3aXBQb2ludHMsIFt7XG4gICAga2V5OiAnaW5pdFBvaW50cycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRQb2ludHMoKSB7XG4gICAgICB2YXIgaSA9IHZvaWQgMDtcbiAgICAgIHRoaXMubmV4dFBvaW50ID0gMDtcbiAgICAgIHRoaXMucG9pbnRzID0gW107XG5cbiAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICAgIHZhciBwb2ludCA9IHRoaXMucG9pbnRzW2ldID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHBvaW50LmNsYXNzTGlzdC5hZGQoJ1N3aXBQb2ludCcpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQocG9pbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2FuaW1hdGVQb2ludCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFuaW1hdGVQb2ludCh4LCB5KSB7XG4gICAgICB2YXIgcG9pbnQgPSB0aGlzLnBvaW50c1t0aGlzLm5leHRQb2ludF07XG5cbiAgICAgIHBvaW50LnN0eWxlLnRvcCA9IHkgKyAncHgnO1xuICAgICAgcG9pbnQuc3R5bGUubGVmdCA9IHggKyAncHgnO1xuICAgICAgcG9pbnQuY2xhc3NMaXN0LnJlbW92ZSgnU3dpcFBvaW50LS1zdGFydC1hbmltYXRpb24nKTtcblxuICAgICAgLy8gZm9yY2UgcmVmbG93XG4gICAgICB2b2lkIHBvaW50Lm9mZnNldFdpZHRoO1xuXG4gICAgICBwb2ludC5jbGFzc0xpc3QuYWRkKCdTd2lwUG9pbnQtLXN0YXJ0LWFuaW1hdGlvbicpO1xuXG4gICAgICB0aGlzLm5leHRQb2ludCA9ICh0aGlzLm5leHRQb2ludCArIDEpICUgdGhpcy5wb2ludHMubGVuZ3RoO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTd2lwUG9pbnRzO1xufSgpO1xuXG5mdW5jdGlvbiBnZXRTdGFnZSh0eXBlKSB7XG4gIGlmICh0eXBlID09PSAnZG9tJykge1xuICAgIHJldHVybiBuZXcgRE9NU3RhZ2UoKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgQ2FudmFzU3RhZ2UoKTtcbn1cblxudmFyIENhbnZhc1N0YWdlID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBDYW52YXNTdGFnZSgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2FudmFzU3RhZ2UpO1xuXG4gICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdGhpcy5lbGVtZW50LnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhDYW52YXNTdGFnZSwgW3tcbiAgICBrZXk6ICdyZXNpemUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNpemUod2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5lbGVtZW50LndpZHRoID0gd2lkdGg7XG4gICAgICB0aGlzLmVsZW1lbnQuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBDYW52YXNTdGFnZTtcbn0oKTtcblxudmFyIERPTVN0YWdlID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBET01TdGFnZSgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRE9NU3RhZ2UpO1xuXG4gICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRE9NU3RhZ2UsIFt7XG4gICAga2V5OiAncmVzaXplJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzaXplKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JztcbiAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBET01TdGFnZTtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gaW5pdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2FwcC9qYXZhc2NyaXB0L3NyYy9jbGllbnQvaW5pdC5qc1xuLy8gbW9kdWxlIGlkID0gMjI4XG4vLyBtb2R1bGUgY2h1bmtzID0gNiA3Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///228\n")},57:/*!*********************************************!*\
  !*** ./app/javascript/src/client/device.js ***!
  \*********************************************/
/*! dynamic exports provided */
/*! all exports used */
function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* global localStorage prompt document */\n\nvar DEVICE_SIZE_KEY = 'SWIP_DEVICE_SIZE';\n\nfunction requestSize() {\n  var storedSize = parseFloat(localStorage.getItem(DEVICE_SIZE_KEY));\n\n  if (!Number.isNaN(storedSize)) {\n    return storedSize;\n  }\n\n  /* eslint-disable no-alert */\n  var inputSize = parseFloat(prompt('Please enter the device size in \"(inch): '));\n  /* eslint-enable no-alert */\n\n  if (!Number.isNaN(inputSize)) {\n    localStorage.setItem(DEVICE_SIZE_KEY, inputSize);\n  }\n\n  return inputSize;\n}\n\nfunction requestFullscreen(element) {\n  if (element.requestFullscreen) {\n    element.requestFullscreen();\n  } else if (element.mozRequestFullScreen) {\n    element.mozRequestFullScreen();\n  } else if (element.webkitRequestFullscreen) {\n    element.webkitRequestFullscreen();\n  } else if (element.msRequestFullscreen) {\n    element.msRequestFullscreen();\n  }\n}\n\nfunction hasFullscreenSupport() {\n  var element = document.documentElement;\n\n  return element.requestFullscreen || element.mozRequestFullScreen || element.webkitRequestFullscreen || element.msRequestFullscreen;\n}\n\nexports.default = {\n  requestSize: requestSize,\n  requestFullscreen: requestFullscreen,\n  hasFullscreenSupport: hasFullscreenSupport\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvamF2YXNjcmlwdC9zcmMvY2xpZW50L2RldmljZS5qcz8yMjFhIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbi8qIGdsb2JhbCBsb2NhbFN0b3JhZ2UgcHJvbXB0IGRvY3VtZW50ICovXG5cbnZhciBERVZJQ0VfU0laRV9LRVkgPSAnU1dJUF9ERVZJQ0VfU0laRSc7XG5cbmZ1bmN0aW9uIHJlcXVlc3RTaXplKCkge1xuICB2YXIgc3RvcmVkU2l6ZSA9IHBhcnNlRmxvYXQobG9jYWxTdG9yYWdlLmdldEl0ZW0oREVWSUNFX1NJWkVfS0VZKSk7XG5cbiAgaWYgKCFOdW1iZXIuaXNOYU4oc3RvcmVkU2l6ZSkpIHtcbiAgICByZXR1cm4gc3RvcmVkU2l6ZTtcbiAgfVxuXG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWFsZXJ0ICovXG4gIHZhciBpbnB1dFNpemUgPSBwYXJzZUZsb2F0KHByb21wdCgnUGxlYXNlIGVudGVyIHRoZSBkZXZpY2Ugc2l6ZSBpbiBcIihpbmNoKTogJykpO1xuICAvKiBlc2xpbnQtZW5hYmxlIG5vLWFsZXJ0ICovXG5cbiAgaWYgKCFOdW1iZXIuaXNOYU4oaW5wdXRTaXplKSkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKERFVklDRV9TSVpFX0tFWSwgaW5wdXRTaXplKTtcbiAgfVxuXG4gIHJldHVybiBpbnB1dFNpemU7XG59XG5cbmZ1bmN0aW9uIHJlcXVlc3RGdWxsc2NyZWVuKGVsZW1lbnQpIHtcbiAgaWYgKGVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4pIHtcbiAgICBlbGVtZW50LnJlcXVlc3RGdWxsc2NyZWVuKCk7XG4gIH0gZWxzZSBpZiAoZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbikge1xuICAgIGVsZW1lbnQubW96UmVxdWVzdEZ1bGxTY3JlZW4oKTtcbiAgfSBlbHNlIGlmIChlbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKSB7XG4gICAgZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbigpO1xuICB9IGVsc2UgaWYgKGVsZW1lbnQubXNSZXF1ZXN0RnVsbHNjcmVlbikge1xuICAgIGVsZW1lbnQubXNSZXF1ZXN0RnVsbHNjcmVlbigpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhc0Z1bGxzY3JlZW5TdXBwb3J0KCkge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuICByZXR1cm4gZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbiB8fCBlbGVtZW50Lm1velJlcXVlc3RGdWxsU2NyZWVuIHx8IGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4gfHwgZWxlbWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuO1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSB7XG4gIHJlcXVlc3RTaXplOiByZXF1ZXN0U2l6ZSxcbiAgcmVxdWVzdEZ1bGxzY3JlZW46IHJlcXVlc3RGdWxsc2NyZWVuLFxuICBoYXNGdWxsc2NyZWVuU3VwcG9ydDogaGFzRnVsbHNjcmVlblN1cHBvcnRcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9hcHAvamF2YXNjcmlwdC9zcmMvY2xpZW50L2RldmljZS5qc1xuLy8gbW9kdWxlIGlkID0gNTdcbi8vIG1vZHVsZSBjaHVua3MgPSA2IDcgMTQiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///57\n")},58:/*!*********************************************!*\
  !*** ./app/javascript/src/client/sensor.js ***!
  \*********************************************/
/*! dynamic exports provided */
/*! all exports used */
function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* global window screen */\n\nvar MIN_SWIPE_DIST = 5;\nvar MOTION_TOLERANCE = 15;\nvar startPoints = {};\n\nfunction onSwipe(element, callback) {\n  element.addEventListener('touchmove', touchMoveHandler);\n\n  element.addEventListener('touchstart', touchStartHandler);\n\n  element.addEventListener('touchend', function (evt) {\n    return touchEndHandler(evt, callback);\n  });\n}\n\nfunction touchStartHandler(evt) {\n  Array.prototype.slice.apply(evt.changedTouches).forEach(function (touch) {\n    startPoints[touch.identifier] = {\n      x: touch.clientX,\n      y: touch.clientY\n    };\n  });\n}\n\nfunction touchMoveHandler(evt) {\n  evt.preventDefault();\n}\n\nfunction touchEndHandler(evt, callback) {\n  Array.prototype.slice.apply(evt.changedTouches).forEach(function (touch) {\n    var start = startPoints[touch.identifier];\n    var end = {\n      x: touch.clientX,\n      y: touch.clientY\n    };\n\n    var diffX = Math.abs(end.x - start.x);\n    var diffY = Math.abs(end.y - start.y);\n\n    var vertBorder = window.innerHeight / 10;\n    var horBorder = window.innerWidth / 10;\n\n    if (diffX > diffY && diffX > MIN_SWIPE_DIST) {\n      if (end.x < start.x && end.x <= horBorder) {\n        callback({ direction: 'LEFT', position: { x: 0, y: end.y } });\n      } else if (end.x > start.x && end.x >= window.innerWidth - horBorder) {\n        callback({ direction: 'RIGHT', position: { x: window.innerWidth, y: end.y } });\n      }\n    } else if (diffY > diffX && diffY > MIN_SWIPE_DIST) {\n      if (end.y < start.y && end.y <= vertBorder) {\n        callback({ direction: 'UP', position: { x: end.x, y: 0 } });\n      } else if (end.y > start.y && end.y >= window.innerHeight - vertBorder) {\n        callback({ direction: 'DOWN', position: { x: end.x, y: window.innerHeight } });\n      }\n    }\n  });\n}\n\nfunction onMove(callback) {\n  window.addEventListener('devicemotion', function (evt) {\n    var x = evt.acceleration.x;\n    var y = evt.acceleration.y;\n    var z = evt.acceleration.z;\n\n    var max = Math.max(z, x, y);\n\n    if (max > MOTION_TOLERANCE) {\n      callback();\n    }\n  });\n}\n\nfunction onChangeOrientation(callback) {\n  var prevBeta = null;\n  var prevGamma = null;\n\n  window.addEventListener('deviceorientation', function (evt) {\n    var beta = Math.round(evt.beta);\n    var gamma = Math.round(evt.gamma);\n\n    if (beta !== prevBeta || gamma !== prevGamma) {\n      var orientation = screen.orientation || screen.mozOrientation || screen.msOrientation;\n      var rotation = getRotation({ orientation: orientation, beta: beta, gamma: gamma });\n\n      callback({ rotation: rotation });\n    }\n\n    prevBeta = beta;\n    prevGamma = gamma;\n  });\n}\n\nfunction getRotation(_ref) {\n  var orientation = _ref.orientation,\n      beta = _ref.beta,\n      gamma = _ref.gamma;\n\n  switch (orientation.type) {\n    case 'portrait-primary':\n      return { x: gamma, y: beta };\n\n    case 'portrait-secondary':\n      return { x: gamma, y: beta };\n\n    case 'landscape-primary':\n      return { x: beta, y: -gamma };\n\n    case 'landscape-secondary':\n      return { x: -beta, y: gamma };\n\n    default:\n      return { x: 0, y: 0 };\n  }\n}\n\nexports.default = {\n  onSwipe: onSwipe,\n  onMove: onMove,\n  onChangeOrientation: onChangeOrientation\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvamF2YXNjcmlwdC9zcmMvY2xpZW50L3NlbnNvci5qcz84MTViIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbi8qIGdsb2JhbCB3aW5kb3cgc2NyZWVuICovXG5cbnZhciBNSU5fU1dJUEVfRElTVCA9IDU7XG52YXIgTU9USU9OX1RPTEVSQU5DRSA9IDE1O1xudmFyIHN0YXJ0UG9pbnRzID0ge307XG5cbmZ1bmN0aW9uIG9uU3dpcGUoZWxlbWVudCwgY2FsbGJhY2spIHtcbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0b3VjaE1vdmVIYW5kbGVyKTtcblxuICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0b3VjaFN0YXJ0SGFuZGxlcik7XG5cbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGZ1bmN0aW9uIChldnQpIHtcbiAgICByZXR1cm4gdG91Y2hFbmRIYW5kbGVyKGV2dCwgY2FsbGJhY2spO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gdG91Y2hTdGFydEhhbmRsZXIoZXZ0KSB7XG4gIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShldnQuY2hhbmdlZFRvdWNoZXMpLmZvckVhY2goZnVuY3Rpb24gKHRvdWNoKSB7XG4gICAgc3RhcnRQb2ludHNbdG91Y2guaWRlbnRpZmllcl0gPSB7XG4gICAgICB4OiB0b3VjaC5jbGllbnRYLFxuICAgICAgeTogdG91Y2guY2xpZW50WVxuICAgIH07XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB0b3VjaE1vdmVIYW5kbGVyKGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbn1cblxuZnVuY3Rpb24gdG91Y2hFbmRIYW5kbGVyKGV2dCwgY2FsbGJhY2spIHtcbiAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGV2dC5jaGFuZ2VkVG91Y2hlcykuZm9yRWFjaChmdW5jdGlvbiAodG91Y2gpIHtcbiAgICB2YXIgc3RhcnQgPSBzdGFydFBvaW50c1t0b3VjaC5pZGVudGlmaWVyXTtcbiAgICB2YXIgZW5kID0ge1xuICAgICAgeDogdG91Y2guY2xpZW50WCxcbiAgICAgIHk6IHRvdWNoLmNsaWVudFlcbiAgICB9O1xuXG4gICAgdmFyIGRpZmZYID0gTWF0aC5hYnMoZW5kLnggLSBzdGFydC54KTtcbiAgICB2YXIgZGlmZlkgPSBNYXRoLmFicyhlbmQueSAtIHN0YXJ0LnkpO1xuXG4gICAgdmFyIHZlcnRCb3JkZXIgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLyAxMDtcbiAgICB2YXIgaG9yQm9yZGVyID0gd2luZG93LmlubmVyV2lkdGggLyAxMDtcblxuICAgIGlmIChkaWZmWCA+IGRpZmZZICYmIGRpZmZYID4gTUlOX1NXSVBFX0RJU1QpIHtcbiAgICAgIGlmIChlbmQueCA8IHN0YXJ0LnggJiYgZW5kLnggPD0gaG9yQm9yZGVyKSB7XG4gICAgICAgIGNhbGxiYWNrKHsgZGlyZWN0aW9uOiAnTEVGVCcsIHBvc2l0aW9uOiB7IHg6IDAsIHk6IGVuZC55IH0gfSk7XG4gICAgICB9IGVsc2UgaWYgKGVuZC54ID4gc3RhcnQueCAmJiBlbmQueCA+PSB3aW5kb3cuaW5uZXJXaWR0aCAtIGhvckJvcmRlcikge1xuICAgICAgICBjYWxsYmFjayh7IGRpcmVjdGlvbjogJ1JJR0hUJywgcG9zaXRpb246IHsgeDogd2luZG93LmlubmVyV2lkdGgsIHk6IGVuZC55IH0gfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkaWZmWSA+IGRpZmZYICYmIGRpZmZZID4gTUlOX1NXSVBFX0RJU1QpIHtcbiAgICAgIGlmIChlbmQueSA8IHN0YXJ0LnkgJiYgZW5kLnkgPD0gdmVydEJvcmRlcikge1xuICAgICAgICBjYWxsYmFjayh7IGRpcmVjdGlvbjogJ1VQJywgcG9zaXRpb246IHsgeDogZW5kLngsIHk6IDAgfSB9KTtcbiAgICAgIH0gZWxzZSBpZiAoZW5kLnkgPiBzdGFydC55ICYmIGVuZC55ID49IHdpbmRvdy5pbm5lckhlaWdodCAtIHZlcnRCb3JkZXIpIHtcbiAgICAgICAgY2FsbGJhY2soeyBkaXJlY3Rpb246ICdET1dOJywgcG9zaXRpb246IHsgeDogZW5kLngsIHk6IHdpbmRvdy5pbm5lckhlaWdodCB9IH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG9uTW92ZShjYWxsYmFjaykge1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlbW90aW9uJywgZnVuY3Rpb24gKGV2dCkge1xuICAgIHZhciB4ID0gZXZ0LmFjY2VsZXJhdGlvbi54O1xuICAgIHZhciB5ID0gZXZ0LmFjY2VsZXJhdGlvbi55O1xuICAgIHZhciB6ID0gZXZ0LmFjY2VsZXJhdGlvbi56O1xuXG4gICAgdmFyIG1heCA9IE1hdGgubWF4KHosIHgsIHkpO1xuXG4gICAgaWYgKG1heCA+IE1PVElPTl9UT0xFUkFOQ0UpIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gb25DaGFuZ2VPcmllbnRhdGlvbihjYWxsYmFjaykge1xuICB2YXIgcHJldkJldGEgPSBudWxsO1xuICB2YXIgcHJldkdhbW1hID0gbnVsbDtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlb3JpZW50YXRpb24nLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgdmFyIGJldGEgPSBNYXRoLnJvdW5kKGV2dC5iZXRhKTtcbiAgICB2YXIgZ2FtbWEgPSBNYXRoLnJvdW5kKGV2dC5nYW1tYSk7XG5cbiAgICBpZiAoYmV0YSAhPT0gcHJldkJldGEgfHwgZ2FtbWEgIT09IHByZXZHYW1tYSkge1xuICAgICAgdmFyIG9yaWVudGF0aW9uID0gc2NyZWVuLm9yaWVudGF0aW9uIHx8IHNjcmVlbi5tb3pPcmllbnRhdGlvbiB8fCBzY3JlZW4ubXNPcmllbnRhdGlvbjtcbiAgICAgIHZhciByb3RhdGlvbiA9IGdldFJvdGF0aW9uKHsgb3JpZW50YXRpb246IG9yaWVudGF0aW9uLCBiZXRhOiBiZXRhLCBnYW1tYTogZ2FtbWEgfSk7XG5cbiAgICAgIGNhbGxiYWNrKHsgcm90YXRpb246IHJvdGF0aW9uIH0pO1xuICAgIH1cblxuICAgIHByZXZCZXRhID0gYmV0YTtcbiAgICBwcmV2R2FtbWEgPSBnYW1tYTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldFJvdGF0aW9uKF9yZWYpIHtcbiAgdmFyIG9yaWVudGF0aW9uID0gX3JlZi5vcmllbnRhdGlvbixcbiAgICAgIGJldGEgPSBfcmVmLmJldGEsXG4gICAgICBnYW1tYSA9IF9yZWYuZ2FtbWE7XG5cbiAgc3dpdGNoIChvcmllbnRhdGlvbi50eXBlKSB7XG4gICAgY2FzZSAncG9ydHJhaXQtcHJpbWFyeSc6XG4gICAgICByZXR1cm4geyB4OiBnYW1tYSwgeTogYmV0YSB9O1xuXG4gICAgY2FzZSAncG9ydHJhaXQtc2Vjb25kYXJ5JzpcbiAgICAgIHJldHVybiB7IHg6IGdhbW1hLCB5OiBiZXRhIH07XG5cbiAgICBjYXNlICdsYW5kc2NhcGUtcHJpbWFyeSc6XG4gICAgICByZXR1cm4geyB4OiBiZXRhLCB5OiAtZ2FtbWEgfTtcblxuICAgIGNhc2UgJ2xhbmRzY2FwZS1zZWNvbmRhcnknOlxuICAgICAgcmV0dXJuIHsgeDogLWJldGEsIHk6IGdhbW1hIH07XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHsgeDogMCwgeTogMCB9O1xuICB9XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IHtcbiAgb25Td2lwZTogb25Td2lwZSxcbiAgb25Nb3ZlOiBvbk1vdmUsXG4gIG9uQ2hhbmdlT3JpZW50YXRpb246IG9uQ2hhbmdlT3JpZW50YXRpb25cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9hcHAvamF2YXNjcmlwdC9zcmMvY2xpZW50L3NlbnNvci5qc1xuLy8gbW9kdWxlIGlkID0gNThcbi8vIG1vZHVsZSBjaHVua3MgPSA2IDcgMTMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///58\n")}});